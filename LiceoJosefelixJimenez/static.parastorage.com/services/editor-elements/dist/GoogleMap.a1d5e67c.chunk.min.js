(("undefined"!=typeof self?self:this).webpackJsonp_thunderbolt_elements=("undefined"!=typeof self?self:this).webpackJsonp_thunderbolt_elements||[]).push([[133],{421:function(e,t,n){"use strict";n.r(t);var a=n(143),r=n(500),o=n.n(r),i=n(0),l=n(512),u=n(583);function c(){var e=a.useRef([]);return[a.useCallback((function(){return new Promise((function(t){return e.current.push(t)}))}),[]),a.useCallback((function(t){e.current.forEach((function(e){return e(t)})),e.current.length=0}),[])]}var s=function(e,t){if(e||t)return t?{path:e,fillColor:t,strokeColor:t,fillOpacity:1,scale:.5}:function(e){if(e&&e.endsWith(".webp"))try{var t=e.match(/media\/[^/]+/)[0].split(".")[1];e=e.replace(/.webp$/,"."+t)}catch(e){}return e}(e)},f="load",d="message",p="SET_INITIAL_LOCATIONS",m="SET_CENTER",v="CENTER_UPDATED",g="SET_CENTER_FINISHED",b="SET_ZOOM",E="ZOOM_UPDATED",O="SET_ZOOM_FINISHED",_="MARKER_CLICKED",C="MAP_CLICKED";function M(e,t,n){var r,o,M=n.onUpdateZoom,h=n.onUpdateCenter,y=n.onMarkerClicked,j=n.onMapClicked,k=c(),S=k[0],w=k[1],N=c(),L=N[0],T=N[1],D=Object(a.useState)(!1),I=D[0],A=D[1],R=Object(a.useMemo)((function(){return function(e){return Object(i.a)(Object(i.a)({},e),{locations:e.locations.map((function(e){return Object(i.a)(Object(i.a)({},e),{icon:s(e.pinIcon,e.pinColor)})}))})}(t)}),[t]),U=Object(u.a)(I?R:null),G=((r={})[g]=function(){return w()},r[v]=function(e){return null==h?void 0:h(e)},r[O]=function(){return T()},r[E]=function(e){return null==M?void 0:M({zoom:e})},r[_]=function(e){return null==y?void 0:y(Object(i.a)({type:"markerClicked"},e))},r[C]=function(e){var t=e.longitude,n=e.latitude,a=Object(i.e)(e,["longitude","latitude"]);return null==j?void 0:j(Object(i.a)({type:"mapClicked",location:{longitude:t,latitude:n}},a))},r),Z=((o={})[f]=function(e){(0,e._sendMessage)({type:p,data:JSON.stringify(R)}),A(!0)},o[d]=function(e){var t,n=e.event;if("string"==typeof n.payload){var a=JSON.parse(n.payload),r=a.type,o=a.data;null===(t=G[r])||void 0===t||t.call(G,o)}},o),F=Object(l.a)((function(e,t){var n;return null===(n=Z[e.type])||void 0===n?void 0:n.call(Z,{event:e,_sendMessage:t})})),x=F[0],J=F[1];return Object(a.useImperativeHandle)(e,(function(){return{setMapCenter:function(e,t){var n=S();return J({type:m,data:JSON.stringify({longitude:e,latitude:t})}),n},setMapZoom:function(e){var t=L();return J({type:b,data:e}),t}}})),Object(a.useEffect)((function(){if(I){var e=!!U&&(t=R.locations,n=U.locations,t.length===n.length&&t.every((function(e,t){var a=Object.keys(e);return a.length===Object.keys(n[t]).length&&a.every((function(a){return e[a]===n[t][a]}))})));J(JSON.stringify(Object(i.a)(Object(i.a)({},R),{shouldKeepMarkers:e})))}var t,n}),[R,U,J,I]),[x]}var h=n(700),y=n.n(h),j={GoogleMapLiftedShadow:function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:o()(y.a.left,y.a.shd)}),a.createElement("div",{className:o()(y.a.right,y.a.shd)}))},GoogleMapSloppy:function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:o()(y.a.brd,y.a.one)}),a.createElement("div",{className:o()(y.a.brd,y.a.two)}))},GoogleMapSkin:function(){return a.createElement(a.Fragment,null)},GoogleMapDefault:function(){return a.createElement(a.Fragment,null)}},k=n(919),S=n.n(k),w=n(920),N=n.n(w);t.default=a.forwardRef((function(e,t){var n=e.id,r=e.skin,i=e.urlQueries,l=e.mapData,u=e.translate,c=e.onUpdateCenter,s=e.onUpdateZoom,f=e.onMarkerClicked,d=e.onMapClicked,p=j[r],m=S.a+"?"+i+"&"+new URLSearchParams({googleMapsScriptUrl:N.a}),v=a.useState(!1),g=v[0],b=v[1],E=M(t,l,{onUpdateCenter:c,onUpdateZoom:s,onMarkerClicked:f,onMapClicked:d})[0];a.useEffect((function(){b(!0)}),[m]);var O=u("component_label","COMPONENT_LABEL_googleMapsTitle","Google Map");return g?a.createElement("wix-iframe",{id:n,title:O,"aria-label":O,"data-src":m,class:o()(y.a[r],y.a.wixIframe),tabindex:0},a.createElement(p,null),a.createElement("div",{id:"mapContainer_"+n,className:y.a.mapContainer},a.createElement("iframe",{ref:E,title:O,"aria-label":O,"data-src":m,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0}))):null}))},512:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(143),r=n(511);function o(e){void 0===e&&(e=function(){return{}});var t=Object(a.useRef)(void 0),n=Object(a.useRef)(void 0),o=Object(a.useCallback)((function(e,n,a){if(void 0===n&&(n="*"),t.current){var r=t.current.contentWindow;null==r||r.postMessage(e,n,a)}}),[]),i=Object(a.useCallback)((function(a){if(n.current&&(n.current(),n.current=void 0),a){var r=function(){return e({type:"load"},o)};a.addEventListener("load",r),t.current=a,n.current=function(){a.removeEventListener("load",r)}}}),[e,o]);return Object(a.useEffect)((function(){if(Object(r.b)()){var n=function(n){var a;n.source&&n.source!==(null===(a=t.current)||void 0===a?void 0:a.contentWindow)||e({type:"message",payload:n.data},o)};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}}),[e,o]),[i,o]}},583:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(143);function r(e,t){void 0===t&&(t=null);var n=Object(a.useRef)(t);return Object(a.useEffect)((function(){n.current=e}),[e]),n.current}},700:function(e,t,n){e.exports={GoogleMapSkin:"_1LodC",googleMapSkin:"_1LodC",mapContainer:"_3HA2p",GoogleMapDefault:"_2C90e",googleMapDefault:"_2C90e",GoogleMapSloppy:"_2thyl",googleMapSloppy:"_2thyl",brd:"_5hmKa",one:"_3amD6",two:"_3pVOf",GoogleMapLiftedShadow:"ugbAt",googleMapLiftedShadow:"ugbAt",shd:"_2LZih",left:"_2nA3_",right:"_29t6M"}},919:function(e,t,n){e.exports=n.p+"b4f9c49a00780b3a8097e7114b529be7.html"},920:function(e,t,n){e.exports=n.p+"google-map.min.js"}}]);
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements/dist/GoogleMap.a1d5e67c.chunk.min.js.map